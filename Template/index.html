<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Mystical Tower - Puzzle Game</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <h1>The Mystical Tower</h1>
            <div class="player-info" id="player-info">
                <span id="player-name"></span>
                <span id="player-score">Score: 0</span>
            </div>
            <button id="start-game-btn" class="btn primary-btn">Start Game</button>
            <button id="reset-game-btn" class="btn secondary-btn" style="display: none;">Reset Game</button>
        </header>

        <!-- Main Game Area -->
        <main class="game-main">
            <!-- Puzzle Display -->
            <div class="puzzle-panel" id="puzzle-panel">
                <div class="welcome-screen" id="welcome-screen">
                    <h2>Welcome to the Mystical Tower</h2>
                    <p>Start the game to begin your journey through the tower.</p>
                </div>
                
                <div class="puzzle-card" id="puzzle-card" style="display: none;">
                    <div class="puzzle-header">
                        <h2 id="puzzle-title">Puzzle Title</h2>
                        <span id="puzzle-difficulty" class="badge">Medium</span>
                    </div>
                    <p id="puzzle-description">Puzzle description will appear here.</p>
                    
                    <div class="puzzle-stats">
                        <div class="stat-row">
                            <span>Time</span>
                            <span id="puzzle-time">00:00</span>
                            <div class="progress-bar">
                                <div id="time-progress" class="progress" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="stat-row">
                            <span>Attempts</span>
                            <span id="puzzle-attempts">0</span>
                            <div class="progress-bar">
                                <div id="attempts-progress" class="progress" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="stat-row">
                            <span>Hints Used</span>
                            <span id="hints-used">0/3</span>
                            <div class="progress-bar">
                                <div id="hints-progress" class="progress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tower-progress">
                        <h3>Tower Progress</h3>
                        <div class="progress-bar">
                            <div id="tower-progress" class="progress" style="width: 0%"></div>
                        </div>
                        <div class="progress-labels">
                            <span id="current-level">Level 1</span>
                            <span id="level-count">1/5</span>
                        </div>
                    </div>
                    
                    <div class="score-display">
                        <h3>Score</h3>
                        <div id="score-value" class="score">0</div>
                    </div>
                </div>
                
                <div class="completion-screen" id="completion-screen" style="display: none;">
                    <h2>Congratulations!</h2>
                    <p>You've completed all the puzzles and escaped the Mystical Tower!</p>
                    <p class="final-score">Final Score: <span id="final-score">0</span></p>
                </div>
            </div>
            
            <!-- Chat Interface -->
            <div class="chat-panel">
                <div class="chat-header">
                    <h2>Mysterious Guide</h2>
                </div>
                
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will be added here dynamically -->
                </div>
                
                <div class="chat-input-area">
                    <input type="text" id="chat-input" placeholder="Type your message..." disabled>
                    <button id="send-btn" class="btn primary-btn" disabled>Send</button>
                    <button id="hint-btn" class="btn hint-btn" disabled>Hint</button>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="game-footer">
            <p>AI-Driven Chatbot Puzzle Game &copy; <span id="current-year"></span></p>
        </footer>
    </div>
    
    <!-- Start Game Dialog -->
    <div class="dialog-overlay" id="start-dialog-overlay" style="display: none;">
        <div class="dialog">
            <div class="dialog-header">
                <h2>Welcome to The Mystical Tower</h2>
                <button id="close-dialog-btn" class="close-btn">&times;</button>
            </div>
            
            <div class="dialog-content">
                <p>You find yourself trapped in a mysterious tower filled with puzzles and enigmas. Solve the challenges to ascend the tower and find your way out.</p>
                
                <div class="form-group">
                    <label for="player-name-input">Enter your name:</label>
                    <input type="text" id="player-name-input" placeholder="Your name">
                </div>
            </div>
            
            <div class="dialog-footer">
                <button id="begin-adventure-btn" class="btn primary-btn">Begin Adventure</button>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>